{"version":3,"sources":["chathandler.ts","components/login.tsx","components/chat.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ChatHandler","socket","_state","io","window","location","host","split","on","emit","data","state","user","users","push","filter","u","this","v","active","undefined","username","password","content","EventEmitter","Error","withStyles","root","color","Typography","LoginForm","props","error","chathandler","setState","Grid","container","spacing","direction","alignItems","justifyContent","style","minHeight","Paper","elevation","padding","height","width","margin","onSubmit","e","preventDefault","requestLogin","TextField","label","value","onChange","target","fullWidth","required","type","FormControlLabel","control","Checkbox","name","Button","variant","React","Component","ChatMessage","sender","Chat","input","messages","appendMessage","bind","appendAnnouncement","message","map","i","item","sendMessage","setInput","id","endIcon","Send","App","authenticated","connected","reload","CircularProgress","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec06cd73.chunk.js","sourcesContent":["import { EventEmitter } from \"events\";\r\nimport io, { Socket } from \"socket.io-client\";\r\n\r\ninterface IntroductionPacket {\r\n  username: string;\r\n  users: string[];\r\n  time: string;\r\n}\r\n\r\ninterface ChatState {\r\n  username: string;\r\n  users: string[];\r\n}\r\n\r\ninterface MessagePacket {\r\n  sender: string;\r\n  content: string;\r\n}\r\n\r\nexport default class ChatHandler extends EventEmitter {\r\n  private socket: Socket;\r\n  private _state: ChatState | undefined;\r\n\r\n  public get state(): ChatState | undefined {\r\n    return this._state;\r\n  }\r\n\r\n  private set state(v: ChatState | undefined) {\r\n    this._state = v;\r\n  }\r\n\r\n  public get connected(): boolean {\r\n    return this.socket && this.socket.active;\r\n  }\r\n\r\n  public get authenticated(): boolean {\r\n    return this.state !== undefined;\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.socket = io(`http://${window.location.host.split(\":\")[0]}:3001`);\r\n\r\n    this.socket.on(\"connect\", () => this.emit(\"reload\"));\r\n    this.socket.on(\"disconnect\", () => this.emit(\"reload\"));\r\n\r\n    this.socket.on(\"welcome\", (data: IntroductionPacket) => {\r\n      this.state = data;\r\n      this.emit(\"reload\");\r\n    });\r\n\r\n    this.socket.on(\"incorrect-password\", () => this.emit(\"incorrect-password\"));\r\n\r\n    this.socket.on(\"chat-message\", (data: MessagePacket) => {\r\n      if (this.state) this.emit(\"chat-message\", data);\r\n    });\r\n\r\n    this.socket.on(\"user-join\", (user: string) => {\r\n      this.emit(\"announcement\", `${user} has joined the chat!`);\r\n\r\n      this.state?.users.push(user);\r\n      this.emit(\"reload\");\r\n    });\r\n\r\n    this.socket.on(\"user-leave\", (user: string) => {\r\n      this.emit(\"announcement\", `${user} has left the chat!`);\r\n\r\n      if (!this.state) return;\r\n\r\n      this.state.users = this.state?.users.filter((u) => u !== user);\r\n      this.emit(\"reload\");\r\n    });\r\n  }\r\n\r\n  requestLogin(username: string, password: string) {\r\n    this.socket.emit(\"login-request\", { username, password });\r\n  }\r\n\r\n  sendMessage(content: string) {\r\n    this.socket.emit(\"chat-message\", content);\r\n  }\r\n}\r\n","import {\r\n  Grid,\r\n  Paper,\r\n  TextField,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Button,\r\n  Typography,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport ChatHandler from \"../chathandler\";\r\n\r\nconst Error = withStyles({\r\n  root: {\r\n    color: \"#ff0000\",\r\n  },\r\n})(Typography);\r\n\r\ninterface LoginProps {\r\n  chathandler: ChatHandler;\r\n}\r\n\r\ninterface LoginState {\r\n  username: string;\r\n  password: string;\r\n  error: string;\r\n}\r\n\r\nexport default class LoginForm extends React.Component<LoginProps, LoginState> {\r\n  constructor(props: LoginProps) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      error: \"\",\r\n    };\r\n    this.props.chathandler.on(\"incorrect-password\", () => {\r\n      this.setState({\r\n        username: this.state.username,\r\n        password: \"\",\r\n        error: \"Your password is incorrect!\",\r\n      });\r\n    });\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const paperStyle = {\r\n      padding: 50,\r\n      height: 320,\r\n      width: 320,\r\n      margin: \"20px auto\",\r\n    };\r\n\r\n    return (\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n        style={{ minHeight: \"100vh\" }}\r\n      >\r\n        <Paper elevation={10} style={paperStyle}>\r\n          <h2>LAET Chat - Sign In</h2>\r\n\r\n          <form\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              const { username, password } = this.state;\r\n              this.props.chathandler.requestLogin(username, password);\r\n            }}\r\n          >\r\n            <TextField\r\n              label=\"Username\"\r\n              value={this.state.username}\r\n              onChange={(e) =>\r\n                this.setState({\r\n                  username: e.target.value,\r\n                  password: this.state.password,\r\n                  error: \"\",\r\n                })\r\n              }\r\n              fullWidth\r\n              required\r\n            ></TextField>\r\n            <TextField\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={this.state.password}\r\n              onChange={(e) =>\r\n                this.setState({\r\n                  username: this.state.username,\r\n                  password: e.target.value,\r\n                  error: \"\",\r\n                })\r\n              }\r\n              fullWidth\r\n              required\r\n            ></TextField>\r\n            <FormControlLabel\r\n              control={<Checkbox name=\"checkedB\" color=\"primary\" />}\r\n              label=\"Remember me\"\r\n            />\r\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n              Sign In\r\n            </Button>{\" \"}\r\n            {this.state.error ? <Error>{this.state.error}</Error> : <></>}\r\n          </form>\r\n        </Paper>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n","import { Button, Grid, TextField, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { Send } from \"@material-ui/icons\";\r\nimport ChatHandler from \"../chathandler\";\r\n\r\ninterface Message {\r\n  sender: string;\r\n  content: string;\r\n}\r\n\r\nconst ChatMessage = (props: Message) => (\r\n  <Typography>\r\n    <b>{props.sender}</b>: {props.content}\r\n  </Typography>\r\n);\r\n\r\ninterface ChatState {\r\n  input: string;\r\n  messages: JSX.Element[];\r\n}\r\n\r\ninterface ChatProps {\r\n  chathandler: ChatHandler;\r\n}\r\n\r\nexport default class Chat extends React.Component<ChatProps, ChatState> {\r\n  constructor(props: ChatProps) {\r\n    super(props);\r\n\r\n    this.state = { input: \"\", messages: [] };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.chathandler.on(\"chat-message\", this.appendMessage.bind(this));\r\n    this.props.chathandler.on(\"announcement\", this.appendAnnouncement.bind(this));\r\n  }\r\n\r\n  private appendMessage(message: Message) {\r\n    let { input, messages } = this.state;\r\n    const { sender, content } = message;\r\n    messages.push(<ChatMessage sender={sender} content={content} />);\r\n    this.setState({ input, messages });\r\n  }\r\n\r\n  private appendAnnouncement(content: string) {\r\n    let { input, messages } = this.state;\r\n    messages.push(<Typography><b>{content}</b></Typography>)\r\n    this.setState({ input, messages })\r\n  }\r\n\r\n  private setInput(input: string) {\r\n    this.setState({ input, messages: this.state.messages });\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const buttonStyle = {\r\n      width: 80,\r\n      height: 50,\r\n    };\r\n\r\n    return (\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        spacing={0}\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n      >\r\n        {this.state.messages.map((e, i) => <Grid item key={i}> {e} </Grid>)}\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            const { input } = this.state;\r\n            this.props.chathandler.sendMessage(input);\r\n            this.setInput(\"\");\r\n          }}\r\n        >\r\n          <Grid item>\r\n            <TextField\r\n              id=\"outlined-basic\"\r\n              label=\"Message\"\r\n              value={this.state.input}\r\n              variant=\"outlined\"\r\n              onChange={(e) => this.setInput(e.target.value)}\r\n            />\r\n            <Button\r\n              variant=\"contained\"\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              style={buttonStyle}\r\n              endIcon={<Send />}\r\n            >\r\n              Send\r\n            </Button>\r\n          </Grid>\r\n        </form>\r\n      </Grid >\r\n    );\r\n  }\r\n}\r\n","import ChatHandler from \"./chathandler\";\r\nimport LoginForm from \"./components/login\";\r\nimport { CircularProgress, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport Chat from \"./components/chat\";\r\n\r\nconst chathandler = new ChatHandler();\r\n\r\ninterface AppState {\r\n  authenticated: boolean;\r\n  connected: boolean;\r\n}\r\n\r\nexport default class App extends React.Component<{}, AppState> {\r\n  constructor(props: {}) {\r\n    super(props);\r\n\r\n    this.state = { authenticated: false, connected: false };\r\n  }\r\n\r\n  componentDidMount() {\r\n    chathandler.on(\"reload\", this.reload.bind(this));\r\n  }\r\n\r\n  reload() {\r\n    const { authenticated, connected } = chathandler;\r\n    this.setState({ authenticated, connected });\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    if (!this.state.connected) {\r\n      return (\r\n        <Grid\r\n          container\r\n          alignItems=\"center\"\r\n          justifyContent=\"center\"\r\n          spacing={0}\r\n          direction=\"column\"\r\n          style={{ minHeight: \"100vh\" }}\r\n        >\r\n          <CircularProgress />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (!this.state.authenticated) {\r\n      return <LoginForm chathandler={chathandler} />;\r\n    }\r\n\r\n    return <Chat chathandler={chathandler} />;\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}