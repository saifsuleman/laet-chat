(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(9),i=n.n(r),c=(n(86),n(14)),o=n(12),u=n(23),h=n(22),d=n(53),l=n(70),j=n.n(l),p=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n),(e=t.call(this)).socket=void 0,e._state=void 0,e.socket=new WebSocket("ws://".concat(window.location.host,"/ws"));var s=function(){return e.emit("reload")};return e.socket.onopen=s,e.socket.onclose=s,e.socket.onmessage=function(t){var n=JSON.parse(t.data);console.log("received ".concat(JSON.stringify(n))),n.type&&e.emit(n.type,n.data)},e.on("welcome",(function(t){e._state=t,s()})),e.on("user-join",(function(t){var n,s=t.user;e.emit("announcement","".concat(s," has joined the chat!")),null===(n=e.state)||void 0===n||n.users.push(s),e.emit("reload")})),e.on("user-leave",(function(t){var n,s=t.user;e.emit("announcement","".concat(s," has left the chat!")),e.state&&(e.state.users=null===(n=e.state)||void 0===n?void 0:n.users.filter((function(e){return e!==s})),e.emit("reload"))})),e}return Object(o.a)(n,[{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"authenticated",get:function(){return void 0!==this.state}},{key:"connected",get:function(){return this.socket&&this.socket.readyState==this.socket.OPEN}},{key:"send",value:function(e,t){var n={type:e,data:t};this.socket.send(JSON.stringify(n))}},{key:"requestLogin",value:function(e,t){this.send("login-request",{username:e,password:t})}},{key:"sendMessage",value:function(e){this.send("chat-message",{content:e})}}]),n}(d.EventEmitter),m=(d.EventEmitter,n(4)),b=n(125),f=n(159),v=n(160),g=n(165),O=n(161),y=n(166),x=n(162),k=n(6),w=Object(m.a)({root:{color:"#ff0000"}})(b.a),S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={username:"",password:"",error:""},s.props.chathandler.on("incorrect-password",(function(){s.setState({username:s.state.username,password:"",error:"Your password is incorrect!"})})),s}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)(f.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",style:{minHeight:"100vh"},children:Object(k.jsxs)(v.a,{elevation:10,style:{padding:50,height:320,width:320,margin:"20px auto"},children:[Object(k.jsx)("h2",{children:"LAET Chat - Sign In"}),Object(k.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.state,s=n.username,a=n.password;e.props.chathandler.requestLogin(s,a)},children:[Object(k.jsx)(g.a,{label:"Username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value,password:e.state.password,error:""})},fullWidth:!0,required:!0}),Object(k.jsx)(g.a,{label:"Password",type:"password",value:this.state.password,onChange:function(t){return e.setState({username:e.state.username,password:t.target.value,error:""})},fullWidth:!0,required:!0}),Object(k.jsx)(O.a,{control:Object(k.jsx)(y.a,{name:"checkedB",color:"primary"}),label:"Remember me"}),Object(k.jsx)(x.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Sign In"})," ",this.state.error?Object(k.jsx)(w,{children:this.state.error}):Object(k.jsx)(k.Fragment,{})]})]})})}}]),n}(a.a.Component),C=n(164),I=n(163),M=function(e){return Object(k.jsxs)(b.a,{children:[Object(k.jsx)("b",{children:e.sender}),": ",e.content]})},E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={input:"",messages:[]},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.chathandler.on("chat-message",this.appendMessage.bind(this)),this.props.chathandler.on("announcement",this.appendAnnouncement.bind(this))}},{key:"appendMessage",value:function(e){var t=this.state,n=t.input,s=t.messages,a=e.sender,r=e.content;s.push(Object(k.jsx)(M,{sender:a,content:r})),this.setState({input:n,messages:s})}},{key:"appendAnnouncement",value:function(e){var t=this.state,n=t.input,s=t.messages;s.push(Object(k.jsx)(b.a,{children:Object(k.jsx)("b",{children:e})})),this.setState({input:n,messages:s})}},{key:"setInput",value:function(e){this.setState({input:e,messages:this.state.messages})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)(f.a,{container:!0,direction:"column",spacing:0,alignItems:"center",justifyContent:"center",children:[this.state.messages.map((function(e,t){return Object(k.jsxs)(f.a,{item:!0,children:[" ",e," "]},t)})),Object(k.jsx)("form",{onSubmit:function(t){t.preventDefault();var n=e.state.input;e.props.chathandler.sendMessage(n),e.setInput("")},children:Object(k.jsxs)(f.a,{item:!0,children:[Object(k.jsx)(g.a,{id:"outlined-basic",label:"Message",value:this.state.input,variant:"outlined",onChange:function(t){return e.setInput(t.target.value)}}),Object(k.jsx)(x.a,{variant:"contained",type:"submit",color:"primary",style:{width:80,height:50},endIcon:Object(k.jsx)(I.a,{}),children:"Send"})]})})]})}}]),n}(a.a.Component),q=new p,D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={authenticated:!1,connected:!1},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){q.on("reload",this.reload.bind(this))}},{key:"reload",value:function(){var e=q.authenticated,t=q.connected;this.setState({authenticated:e,connected:t})}},{key:"render",value:function(){return this.state.connected?this.state.authenticated?Object(k.jsx)(E,{chathandler:q}):Object(k.jsx)(S,{chathandler:q}):Object(k.jsx)(f.a,{container:!0,alignItems:"center",justifyContent:"center",spacing:0,direction:"column",style:{minHeight:"100vh"},children:Object(k.jsx)(C.a,{})})}}]),n}(a.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};i.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(D,{})}),document.getElementById("root")),F()},86:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.e3c59ef7.chunk.js.map